/**
 * Panel Animations and Transitions
 * Consistent animations for all UI panels
 */

/* ===== SMOOTH TRANSITIONS ===== */
:root {
    --panel-transition-fast: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    --panel-transition-normal: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    --panel-transition-slow: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    --panel-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
    --panel-shadow-hover: 0 8px 24px rgba(0, 0, 0, 0.5);
}

/* ===== PANEL COLLAPSE ANIMATIONS ===== */
@keyframes panelCollapse {
    from {
        max-height: var(--panel-max-height, 600px);
        opacity: 1;
    }
    to {
        max-height: 0;
        opacity: 0;
    }
}

@keyframes panelExpand {
    from {
        max-height: 0;
        opacity: 0;
    }
    to {
        max-height: var(--panel-max-height, 600px);
        opacity: 1;
    }
}

@keyframes panelSlideIn {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes panelSlideOut {
    from {
        transform: translateX(0);
        opacity: 1;
    }
    to {
        transform: translateX(100%);
        opacity: 0;
    }
}

@keyframes panelFadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes panelFadeOut {
    from { opacity: 1; }
    to { opacity: 0; }
}

@keyframes panelBounceIn {
    0% {
        transform: scale(0.8);
        opacity: 0;
    }
    50% {
        transform: scale(1.05);
    }
    100% {
        transform: scale(1);
        opacity: 1;
    }
}

/* ===== SIDEBAR ANIMATIONS ===== */
.modern-sidebar {
    transition: width var(--panel-transition-normal),
                transform var(--panel-transition-normal);
}

.modern-sidebar.collapsed {
    width: 50px !important;
}

.modern-sidebar:not(.collapsed):hover .sidebar-resize-handle {
    background: var(--accent-wasm, #654FF0);
}

/* ===== FLOATING PANEL ANIMATIONS ===== */
.floating-panel {
    transition: all var(--panel-transition-normal);
    will-change: transform, opacity;
}

.floating-panel.minimizing {
    animation: panelSlideOut var(--panel-transition-normal) forwards;
}

.floating-panel.restoring {
    animation: panelSlideIn var(--panel-transition-normal) forwards;
}

.floating-panel.collapsing .floating-panel-content {
    animation: panelCollapse var(--panel-transition-normal) forwards;
}

.floating-panel.expanding .floating-panel-content {
    animation: panelExpand var(--panel-transition-normal) forwards;
}

/* ===== MINIMIZED PANELS BAR ===== */
.minimized-panels-bar {
    transition: height var(--panel-transition-normal),
                opacity var(--panel-transition-normal);
}

.minimized-panel {
    animation: panelBounceIn var(--panel-transition-normal);
}

.minimized-panel.removing {
    animation: panelFadeOut var(--panel-transition-fast) forwards;
}

/* ===== BUTTON HOVER EFFECTS ===== */
.panel-btn,
.sidebar-collapse-btn,
.panel-restore-btn,
.panel-close-btn {
    transition: all var(--panel-transition-fast);
}

.panel-btn:hover,
.sidebar-collapse-btn:hover,
.panel-restore-btn:hover {
    background: var(--bg-primary, #0A0E1A) !important;
    color: var(--text-primary, #E6EDF3) !important;
    transform: scale(1.05);
}

.panel-close-btn:hover {
    background: var(--accent-error, #F85149) !important;
    color: white !important;
    transform: scale(1.05);
}

/* ===== RESIZE HANDLE ANIMATIONS ===== */
.sidebar-resize-handle,
.floating-panel-resize-handle {
    transition: background var(--panel-transition-fast),
                width var(--panel-transition-fast);
}

.sidebar-resize-handle:hover,
.floating-panel-resize-handle:hover {
    background: var(--accent-wasm, #654FF0) !important;
    width: 4px !important;
}

/* ===== SECTION COLLAPSE ANIMATIONS ===== */
.sidebar-section {
    transition: all var(--panel-transition-normal);
}

.sidebar-section .section-content {
    overflow: hidden;
    transition: max-height var(--panel-transition-normal),
                opacity var(--panel-transition-normal);
}

.sidebar-section.collapsed .section-content {
    max-height: 0 !important;
    opacity: 0;
    padding: 0 !important;
}

.sidebar-section:not(.collapsed) .section-content {
    max-height: 2000px; /* Large enough for any content */
    opacity: 1;
}

.section-chevron {
    transition: transform var(--panel-transition-normal);
}

.sidebar-section.collapsed .section-chevron {
    transform: rotate(-90deg);
}

/* ===== PANEL SHADOW EFFECTS ===== */
.floating-panel,
.minimized-panel {
    box-shadow: var(--panel-shadow);
}

.floating-panel:hover,
.minimized-panel:hover {
    box-shadow: var(--panel-shadow-hover);
}

.floating-panel.dragging {
    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.6);
    cursor: grabbing !important;
}

/* ===== RESPONSIVE ANIMATIONS ===== */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* ===== FOCUS STYLES ===== */
.panel-btn:focus,
.sidebar-collapse-btn:focus,
.panel-restore-btn:focus,
.panel-close-btn:focus {
    outline: 2px solid var(--accent-wasm, #654FF0);
    outline-offset: 2px;
}

/* ===== LOADING STATE ANIMATIONS ===== */
@keyframes panelPulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

.panel-loading {
    animation: panelPulse 1.5s ease-in-out infinite;
}

/* ===== SCROLLBAR STYLING ===== */
.sidebar-content::-webkit-scrollbar,
.floating-panel-content::-webkit-scrollbar {
    width: 8px;
}

.sidebar-content::-webkit-scrollbar-track,
.floating-panel-content::-webkit-scrollbar-track {
    background: var(--bg-primary, #0A0E1A);
    border-radius: 4px;
}

.sidebar-content::-webkit-scrollbar-thumb,
.floating-panel-content::-webkit-scrollbar-thumb {
    background: var(--text-dim, #484F58);
    border-radius: 4px;
    transition: background var(--panel-transition-fast);
}

.sidebar-content::-webkit-scrollbar-thumb:hover,
.floating-panel-content::-webkit-scrollbar-thumb:hover {
    background: var(--text-secondary, #7D8590);
}

/* ===== PANEL HEADER IMPROVEMENTS ===== */
.sidebar-header,
.floating-panel-header {
    backdrop-filter: blur(10px);
    background: var(--bg-secondary, #151B2C);
    transition: background var(--panel-transition-fast);
}

.floating-panel:hover .floating-panel-header {
    background: var(--bg-tertiary, #1C2333);
}

/* ===== DOUBLE-CLICK TO COLLAPSE ===== */
.sidebar-header h3,
.floating-panel-title {
    user-select: none;
    cursor: pointer;
}

.sidebar-header h3:active,
.floating-panel-title:active {
    transform: scale(0.98);
}
